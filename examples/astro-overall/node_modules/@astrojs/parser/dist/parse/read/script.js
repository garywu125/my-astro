var __defProp = Object.defineProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", {value: true});
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, {get: all[name], enumerable: true});
};

// src/parse/read/script.ts
__markAsModule(exports);
__export(exports, {
  default: () => read_script
});
var script_closing_tag = "</script>";
function get_context(parser, attributes, start) {
  const context = attributes.find((attribute) => attribute.name === "astro");
  if (!context)
    return "runtime";
  if (context.value === true)
    return "setup";
  if (context.value.length !== 1 || context.value[0].type !== "Text") {
    parser.error({
      code: "invalid-script",
      message: "astro attribute must be static"
    }, start);
  }
  const value = context.value[0].data;
  if (value !== "setup") {
    parser.error({
      code: "invalid-script",
      message: 'If the "astro" attribute has a value, its value must be "setup"'
    }, context.start);
  }
  return value;
}
function read_script(parser, start, attributes) {
  const script_start = parser.index;
  const script_end = parser.template.indexOf(script_closing_tag, script_start);
  if (script_end === -1) {
    parser.error({
      code: "unclosed-script",
      message: "<script> must have a closing tag"
    });
  }
  const source = parser.template.slice(0, script_start).replace(/[^\n]/g, " ") + parser.template.slice(script_start, script_end);
  parser.index = script_end + script_closing_tag.length;
  return {
    type: "Script",
    start,
    end: parser.index,
    context: get_context(parser, attributes, start),
    content: source
  };
}
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vc3JjL3BhcnNlL3JlYWQvc2NyaXB0LnRzIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BLElBQU0scUJBQXFCO0FBRTNCLHFCQUFxQixRQUFnQixZQUFtQixPQUFvQztBQUMxRixRQUFNLFVBQVUsV0FBVyxLQUFLLENBQUMsY0FBYyxVQUFVLFNBQVM7QUFDbEUsTUFBSSxDQUFDO0FBQVMsV0FBTztBQUNyQixNQUFJLFFBQVEsVUFBVTtBQUFNLFdBQU87QUFFbkMsTUFBSSxRQUFRLE1BQU0sV0FBVyxLQUFLLFFBQVEsTUFBTSxHQUFHLFNBQVMsUUFBUTtBQUNsRSxXQUFPLE1BQ0w7QUFBQSxNQUNFLE1BQU07QUFBQSxNQUNOLFNBQVM7QUFBQSxPQUVYO0FBQUE7QUFJSixRQUFNLFFBQVEsUUFBUSxNQUFNLEdBQUc7QUFFL0IsTUFBSSxVQUFVLFNBQVM7QUFDckIsV0FBTyxNQUNMO0FBQUEsTUFDRSxNQUFNO0FBQUEsTUFDTixTQUFTO0FBQUEsT0FFWCxRQUFRO0FBQUE7QUFJWixTQUFPO0FBQUE7QUFHTSxxQkFBcUIsUUFBZ0IsT0FBZSxZQUE0QjtBQUM3RixRQUFNLGVBQWUsT0FBTztBQUM1QixRQUFNLGFBQWEsT0FBTyxTQUFTLFFBQVEsb0JBQW9CO0FBRS9ELE1BQUksZUFBZSxJQUFJO0FBQ3JCLFdBQU8sTUFBTTtBQUFBLE1BQ1gsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBO0FBQUE7QUFJYixRQUFNLFNBQVMsT0FBTyxTQUFTLE1BQU0sR0FBRyxjQUFjLFFBQVEsVUFBVSxPQUFPLE9BQU8sU0FBUyxNQUFNLGNBQWM7QUFDbkgsU0FBTyxRQUFRLGFBQWEsbUJBQW1CO0FBRS9DLFNBQU87QUFBQSxJQUNMLE1BQU07QUFBQSxJQUNOO0FBQUEsSUFDQSxLQUFLLE9BQU87QUFBQSxJQUNaLFNBQVMsWUFBWSxRQUFRLFlBQVk7QUFBQSxJQUN6QyxTQUFTO0FBQUE7QUFBQTsiLAogICJuYW1lcyI6IFtdCn0K
