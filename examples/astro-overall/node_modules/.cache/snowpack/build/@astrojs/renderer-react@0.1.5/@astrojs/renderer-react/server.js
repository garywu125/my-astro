import { Component, createElement } from 'react';
import { renderToString, renderToStaticMarkup as renderToStaticMarkup$1 } from 'react-dom/server.js';
import { S as StaticHtml } from '../../common/static-html-cddd5360.js';

const reactTypeof = Symbol.for('react.element');

function check(Component$1, props, children) {
  if (typeof Component$1 !== 'function') return false;

  if (Component$1.prototype != null && typeof Component$1.prototype.render === 'function') {
    return Component.isPrototypeOf(Component$1);
  }

  let error = null;
  let isReactComponent = false;
  function Tester(...args) {
    try {
      const vnode = Component$1(...args);
      if (vnode && vnode['$$typeof'] === reactTypeof) {
        isReactComponent = true;
      }
    } catch (err) {
      error = err;
    }

    return createElement('div');
  }

  renderToStaticMarkup(Tester, props, children, {});

  if (error) {
    throw error;
  }
  return isReactComponent;
}

function renderToStaticMarkup(Component, props, children, metadata) {
  const vnode = createElement(Component, { ...props, children: createElement(StaticHtml, { value: children }), innerHTML: children });
  let html;
  if(metadata && metadata.hydrate) {
    html = renderToString(vnode);
  } else {
    html = renderToStaticMarkup$1(vnode);
  }
  return { html };
}

var server = {
  check,
  renderToStaticMarkup,
};

export default server;
